import { describe, it, expect, beforeEach } from 'vitest';
<% imports.forEach(imp => { %>
<%= imp %>
<% }); %>

describe('<%= targetName %>', () => {
  <% if (targetType === 'entity' || targetType === 'value-object') { %>
  describe('create', () => {
    it('should create a <%= targetNameCamel %> with valid properties', () => {
      const <%= targetNameCamel %> = <%= targetName %>.create({
        // TODO: Add properties
      });

      expect(<%= targetNameCamel %>).toBeDefined();
      expect(<%= targetNameCamel %>.id).toBeDefined();
    });

    it('should throw error for invalid properties', () => {
      expect(() => <%= targetName %>.create({
        // TODO: Add invalid properties
      })).toThrow();
    });
  });

  <% if (targetType === 'value-object') { %>
  describe('equals', () => {
    it('should return true for equal <%= targetNameCamel %>s', () => {
      const <%= targetNameCamel %>1 = <%= targetName %>.create({
        // TODO: Add properties
      });

      const <%= targetNameCamel %>2 = <%= targetName %>.create({
        // TODO: Add same properties
      });

      expect(<%= targetNameCamel %>1.equals(<%= targetNameCamel %>2)).toBe(true);
    });

    it('should return false for different <%= targetNameCamel %>s', () => {
      const <%= targetNameCamel %>1 = <%= targetName %>.create({
        // TODO: Add properties
      });

      const <%= targetNameCamel %>2 = <%= targetName %>.create({
        // TODO: Add different properties
      });

      expect(<%= targetNameCamel %>1.equals(<%= targetNameCamel %>2)).toBe(false);
    });
  });
  <% } %>
  <% } else if (targetType === 'handler') { %>
  let handler: <%= targetName %>;

  beforeEach(() => {
    // TODO: Initialize handler with mock dependencies
    handler = new <%= targetName %>(
      // Mock dependencies here
    );
  });

  describe('execute', () => {
    it('should execute successfully with valid input', async () => {
      // TODO: Create command/query
      const input = {
        // Add input data
      };

      const result = await handler.execute(input);

      expect(result.isSuccess).toBe(true);
      expect(result.value).toBeDefined();
    });

    it('should fail with invalid input', async () => {
      // TODO: Create invalid command/query
      const input = {
        // Add invalid input data
      };

      const result = await handler.execute(input);

      expect(result.isFailure).toBe(true);
      expect(result.error).toBeDefined();
    });
  });
  <% } else if (targetType === 'repository') { %>
  let repository: <%= targetName %>;

  beforeEach(() => {
    // TODO: Initialize repository
    repository = new <%= targetName %>();
  });

  describe('findById', () => {
    it('should return entity when found', async () => {
      // TODO: Create and save entity
      const entity = null; // Create entity

      const found = await repository.findById(entity.id);

      expect(found).toBeDefined();
      expect(found?.id.equals(entity.id)).toBe(true);
    });

    it('should return null when not found', async () => {
      // TODO: Create ID
      const id = null; // Create ID

      const found = await repository.findById(id);

      expect(found).toBeNull();
    });
  });

  describe('save', () => {
    it('should save entity successfully', async () => {
      // TODO: Create entity
      const entity = null; // Create entity

      await repository.save(entity);

      const found = await repository.findById(entity.id);
      expect(found).toBeDefined();
    });
  });

  describe('delete', () => {
    it('should delete entity successfully', async () => {
      // TODO: Create and save entity
      const entity = null; // Create entity
      await repository.save(entity);

      await repository.delete(entity.id);

      const found = await repository.findById(entity.id);
      expect(found).toBeNull();
    });
  });
  <% } else { %>
  let instance: <%= targetName %>;

  beforeEach(() => {
    // TODO: Initialize instance
    instance = new <%= targetName %>();
  });

  describe('method', () => {
    it('should work correctly', () => {
      // TODO: Add test implementation
      expect(instance).toBeDefined();
    });
  });
  <% } %>
});
