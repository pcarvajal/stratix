<% if (isCommand) { %>import { CommandHandler } from '@stratix/abstractions';
<% } else { %>import { QueryHandler } from '@stratix/abstractions';
<% } %>
import { Result } from '@stratix/primitives';
import { <%= useCaseName %><% if (hasInput) { %>, <%= useCaseName %>Input<% } %><% if (hasOutput) { %>, <%= useCaseName %>Output<% } %> } from './<%= useCaseName %>.js';

<% if (isCommand) { %>
export class <%= useCaseName %>Handler implements CommandHandler<<%= useCaseName %><% if (hasOutput) { %>, <%= useCaseName %>Output<% } else { %>, void<% } %>> {
  constructor(
    // Inject dependencies here (repositories, services, etc.)
  ) {}

  async execute(command: <%= useCaseName %>): Promise<Result<<% if (hasOutput) { %><%= useCaseName %>Output<% } else { %>void<% } %>>> {
    try {
      <% if (hasInput) { %>
      // Extract input data
      const { <% inputProps.forEach((prop, index) => { %><%= prop.name %><%= index < inputProps.length - 1 ? ', ' : '' %><% }); %> } = command.data;

      // TODO: Implement business logic
      <% } else { %>
      // TODO: Implement business logic
      <% } %>

      <% if (hasOutput) { %>
      // Return success result
      const output: <%= useCaseName %>Output = {
        <% outputProps.forEach((prop, index) => { %>
        <%= prop.name %>: null as any, // TODO: Set actual value
        <% }); %>
      };

      return Result.ok(output);
      <% } else { %>
      return Result.ok(undefined);
      <% } %>
    } catch (error) {
      return Result.fail(error as Error);
    }
  }
}
<% } else { %>
export class <%= useCaseName %>Handler implements QueryHandler<<%= useCaseName %><% if (hasOutput) { %>, <%= useCaseName %>Output<% } else { %>, void<% } %>> {
  constructor(
    // Inject dependencies here (repositories, read models, etc.)
  ) {}

  async execute(query: <%= useCaseName %>): Promise<Result<<% if (hasOutput) { %><%= useCaseName %>Output<% } else { %>void<% } %>>> {
    try {
      <% if (hasInput) { %>
      // Extract query parameters
      const { <% inputProps.forEach((prop, index) => { %><%= prop.name %><%= index < inputProps.length - 1 ? ', ' : '' %><% }); %> } = query.data;

      // TODO: Implement query logic (read-only operations)
      <% } else { %>
      // TODO: Implement query logic (read-only operations)
      <% } %>

      <% if (hasOutput) { %>
      // Return query result
      const output: <%= useCaseName %>Output = {
        <% outputProps.forEach((prop, index) => { %>
        <%= prop.name %>: null as any, // TODO: Set actual value
        <% }); %>
      };

      return Result.ok(output);
      <% } else { %>
      return Result.ok(undefined);
      <% } %>
    } catch (error) {
      return Result.fail(error as Error);
    }
  }
}
<% } %>
