import { describe, it, expect } from 'vitest';
import { <%= voName %> } from '../<%= voName %>.js';

describe('<%= voName %>', () => {
  describe('create', () => {
    it('should create a <%= voNameCamel %> with valid properties', () => {
      const <%= voNameCamel %> = <%= voName %>.create({
<% props.forEach((prop, index) => { %>
        <%= prop.name %>: <% if (prop.type === 'string') { %>'test-<%= prop.name %>'<% } else if (prop.type === 'number') { %>100<% } else if (prop.type === 'boolean') { %>true<% } else { %>null<% } %><%= index < props.length - 1 ? ',' : '' %>
<% }); %>
      });

<% props.forEach(prop => { %>
      expect(<%= voNameCamel %>.<%= prop.name %>).toBe<% if (prop.type === 'string') { %>('test-<%= prop.name %>')<% } else if (prop.type === 'number') { %>(100)<% } else if (prop.type === 'boolean') { %>(true)<% } else { %>(null)<% } %>;
<% }); %>
    });

<% if (withValidation) { %>
<% props.forEach(prop => { %>
<% if (prop.type === 'string') { %>
    it('should throw error for empty <%= prop.name %>', () => {
      expect(() => <%= voName %>.create({
<% props.forEach((p, index) => { %>
        <%= p.name %>: <% if (p.name === prop.name) { %>''<% } else if (p.type === 'string') { %>'test-<%= p.name %>'<% } else if (p.type === 'number') { %>100<% } else if (p.type === 'boolean') { %>true<% } else { %>null<% } %><%= index < props.length - 1 ? ',' : '' %>
<% }); %>
      })).toThrow('Invalid <%= voName %>: <%= prop.name %> cannot be empty');
    });
<% } %>

<% if (prop.type === 'number') { %>
    it('should throw error for negative <%= prop.name %>', () => {
      expect(() => <%= voName %>.create({
<% props.forEach((p, index) => { %>
        <%= p.name %>: <% if (p.name === prop.name) { %>-1<% } else if (p.type === 'string') { %>'test-<%= p.name %>'<% } else if (p.type === 'number') { %>100<% } else if (p.type === 'boolean') { %>true<% } else { %>null<% } %><%= index < props.length - 1 ? ',' : '' %>
<% }); %>
      })).toThrow('Invalid <%= voName %>: <%= prop.name %> cannot be negative');
    });
<% } %>
<% }); %>
<% } %>
  });

  describe('equals', () => {
    it('should return true for same values', () => {
      const <%= voNameCamel %>1 = <%= voName %>.create({
<% props.forEach((prop, index) => { %>
        <%= prop.name %>: <% if (prop.type === 'string') { %>'test-<%= prop.name %>'<% } else if (prop.type === 'number') { %>100<% } else if (prop.type === 'boolean') { %>true<% } else { %>null<% } %><%= index < props.length - 1 ? ',' : '' %>
<% }); %>
      });

      const <%= voNameCamel %>2 = <%= voName %>.create({
<% props.forEach((prop, index) => { %>
        <%= prop.name %>: <% if (prop.type === 'string') { %>'test-<%= prop.name %>'<% } else if (prop.type === 'number') { %>100<% } else if (prop.type === 'boolean') { %>true<% } else { %>null<% } %><%= index < props.length - 1 ? ',' : '' %>
<% }); %>
      });

      expect(<%= voNameCamel %>1.equals(<%= voNameCamel %>2)).toBe(true);
    });

    it('should return false for different values', () => {
      const <%= voNameCamel %>1 = <%= voName %>.create({
<% props.forEach((prop, index) => { %>
        <%= prop.name %>: <% if (prop.type === 'string') { %>'test-<%= prop.name %>-1'<% } else if (prop.type === 'number') { %>100<% } else if (prop.type === 'boolean') { %>true<% } else { %>null<% } %><%= index < props.length - 1 ? ',' : '' %>
<% }); %>
      });

      const <%= voNameCamel %>2 = <%= voName %>.create({
<% props.forEach((prop, index) => { %>
        <%= prop.name %>: <% if (prop.type === 'string') { %>'test-<%= prop.name %>-2'<% } else if (prop.type === 'number') { %>200<% } else if (prop.type === 'boolean') { %>false<% } else { %>null<% } %><%= index < props.length - 1 ? ',' : '' %>
<% }); %>
      });

      expect(<%= voNameCamel %>1.equals(<%= voNameCamel %>2)).toBe(false);
    });
  });
});
