import { ValueObject } from '@stratix/primitives';

export interface <%= voName %>Props {
<% props.forEach(prop => { %>
  <%= prop.name %>: <%= prop.type %>;
<% }); %>
}

export class <%= voName %> extends ValueObject<<%= voName %>Props> {
  private constructor(props: <%= voName %>Props) {
    super(props);
  }

  // Getters
<% props.forEach(prop => { %>
  get <%= prop.name %>(): <%= prop.type %> {
    return this.props.<%= prop.name %>;
  }

<% }); %>

<% if (withValidation) { %>
  private static validate(props: <%= voName %>Props): void {
<% props.forEach(prop => { %>
<% if (prop.type === 'string') { %>
    if (!props.<%= prop.name %> || props.<%= prop.name %>.trim().length === 0) {
      throw new Error('Invalid <%= voName %>: <%= prop.name %> cannot be empty');
    }
<% } else if (prop.type === 'number') { %>
    if (props.<%= prop.name %> < 0) {
      throw new Error('Invalid <%= voName %>: <%= prop.name %> cannot be negative');
    }
<% } %>
<% }); %>
  }

<% } %>
  static create(props: <%= voName %>Props): <%= voName %> {
<% if (withValidation) { %>
    this.validate(props);
<% } %>
    return new <%= voName %>(props);
  }

<% if (props.length === 1 && props[0].name === 'value') { %>
  toString(): string {
    return String(this.value);
  }
<% } %>
}
